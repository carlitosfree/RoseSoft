<p-tabView>
  <p-tabPanel header="Tienda">
    <br>
    <p-card header="CABECERA CARRITO">
      <form #compraFormulario = "ngForm">
        <div class="ui-g">
          <div class="ui-g-6" >
            <label for="nombre">Nombre: </label>
            <input id="nombre"
                   type="text"
                   name="nombre"
                   required
                   disabled=true
                   placeholder="{{nombre}} {{apellido}}"
                   style="width: 80%; height: 150%">
          </div>
          <div class="ui-g-6" >
            <label for="direccion">Dirección: </label>
            <input id="direccion"
                   type="text"
                   placeholder="Ej: Conocoto"
                   name="direccion"
                   required
                   minlength="15"
                   maxlength="200"
                   [(ngModel)]="direccion"
                   style="width: 80%; height: 150%"
                   #direccionInput = "ngModel">
          </div>
          <div *ngIf="direccionInput.touched && direccionInput.dirty && direccionInput.errors">
            <p *ngIf="direccionInput.errors.required ">
              Este campo es requerido.
            </p>
            <p *ngIf="direccionInput.errors.minlength ">
              llenar con un minimo de 15 caracteres
            </p>
            <p *ngIf="direccionInput.errors.maxlength ">
              Llenar con un maximo de 200 caracteres
            </p>
          </div>
        </div>
        <br>
        <div class="ui-g">
          <div class="ui-g-4">
            <label for="fecha">Fecha: </label>
            <input id="fecha"
                   type="date"
                   placeholder=""
                   name="fecha"
                   required
                   [(ngModel)]="fecha"
                   style="width: 80%; height: 150%"
                   max="2020-02-19"
                   #fechaI = "ngModel"
            >
            <div *ngIf="fechaI.touched && fechaI.dirty && fechaI.errors">
              <p *ngIf="fechaI.errors.required ">
                Este campo es requerido.
              </p>
            </div>
          </div>
          <div class="ui-g-4">
            <label for="estado">Estado: </label>
            <input id="estado"
                   type="text"
                   required
                   placeholder="{{estado}}"
                   name="estado"
                   disabled = true
                   style="width: 75%; height: 150%">
          </div>
          <div class="ui-g-4">
            <label for="total">Total: </label>
            <input id="total"
                   type="number"
                   required
                   placeholder="{{total | currency}}"
                   name="total"
                   disabled=true
                   min="0"
                   max="1000000"
                   [(ngModel)]="total"
                   style="width: 80%; height: 150%"
                   #totalInput = "ngModel">
          </div>
          <div *ngIf="totalInput.touched && totalInput.dirty && totalInput.errors">
            <p *ngIf="totalInput.errors.required ">
              Este campo es requerido.
            </p>
          </div>
        </div>
        <br>
        <div class="ui-g">
          <div class="ui-g-5"></div>
          <div class="ui-g-2">
            <p-button label="COMPRAR" styleClass="ui-button-success"
                      [disabled]="compraFormulario.invalid || estadoBoolean"
                      (onClick)="guardarCabecera()"></p-button>
          </div>
          <div class="ui-g-5"></div>
        </div>
      </form>
    </p-card>

    <br>

    <p-card header="DETALLE CARRITO">
        <br>
        <p-table [value]="detalleTemporal"
                 [paginator]="true"
                 [rows]="5">
          <ng-template pTemplate="caption">
            <p-button label="Añadir Compra"
                      [disabled]=" compraBoolean"
                      (onClick)="mostrarPokemon()"></p-button>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>Pokemon</th>
              <th>Precio</th>
              <th>Cantidad</th>
              <th>Subtotal</th>
              <th>Acciones</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-pokemon let-rowIndex="rowIndex">
            <tr>

              <td>{{pokemon.nombre}}</td>
              <td>{{pokemon.precio | currency}}</td>
              <td>
                <input id="cantidad"
                       type="number"
                       min="0"
                       max="1000"
                       name="cantidad"
                       required
                       placeholder="{{pokemon.cantidad}}"
                       style="width: 80%; height: 150%"
                       [(ngModel)]="pokemon.cantidad"
                       (ngModelChange)="calcularSubtotal(pokemon, rowIndex)"
                       #cantidadInput = "ngModel"
                >
                <div *ngIf="cantidadInput.touched && cantidadInput.dirty && cantidadInput.errors">
                  <p *ngIf="cantidadInput.errors.required ">
                    Este campo es requerido.
                  </p>
                  <p *ngIf="cantidadInput.errors.min">
                    llenar con un numero mayor a 0
                  </p>
                  <p *ngIf="cantidadInput.errors.max ">
                    llenar con un numero menor a 1000
                  </p>
                </div>

              </td>
              <td>
                       {{pokemon.subtotal | currency}}
              </td>
              <td>
                <p-button styleClass="ui-button-danger" label="QUITAR" (onClick)="eliminar(rowIndex) " ></p-button>
              </td>

            </tr>
          </ng-template>
        </p-table>
    </p-card>
    <p-button styleClass="ui-button-warning" label="Volver a inicio" (onClick)="volver() " ></p-button>
  </p-tabPanel>
</p-tabView>


